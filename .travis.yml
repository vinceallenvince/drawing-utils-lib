language: node_js
node_js:
- '0.10'
before_install:
- export DISPLAY=:99.0
- sh -e /etc/init.d/xvfb start
- npm install -g grunt-cli
after_success: grunt release
before_deploy: echo 'ready?'
after_deploy:
- echo 'done!'
- ./deploy-gh-pages.sh
env:
  global:
  - GH_REF: github.com/vinceallenvince/drawing-utils-lib.git
  - secure: f/6OOalzi0RLEdbh+qV9q8IINikMAdP4SBIm7lnQHywDb1kAuP6hKgAVg3V1WDAhjggDettsmMp9JYvgA65BeWWBu53O+3YoG0xyTrfhlOw37tQAFvLCOALW5lfEZoSHGetVft59RTSUKvZTfqfJsa3ZKlU0YaCFghw+6OPwi5A=
deploy:
  - provider: releases
    api_key:
      secure: iA8M5IC8kRPFpDUH8nnDl8hxBwjrkuJyh3M6dVvbDswe4/BEpbWV0WN5Cw/AHlzct6M+jCyKhLSFAo03g3ZghNgY9NYKykaPNlUjT+BWa09F45Icj6+fKC4PpgsSrBZnOdaOf9tGXvxEqAKyaBDZThbzqYuLsdOsWuxc8GlDDAc=
    file: release/drawing-utils-lib.min.js
    on:
      repo: vinceallenvince/drawing-utils-lib
      tags: true
      all_branches: true
  - provider: npm
    email: vince@vinceallen.com
    api_key:
      secure: dkB/0yWncpvvCqFYll2usMR/qtw2XXldZa3LJdIVW7YsP5nwpM9Ge5oCqpvmMQKyuxByzo9TStNwB7efTHR0Yq9e3XwFefaWsSr2iKygD6xDM6CkDywPEG3Zn9iLp/VXSwSX0NiUcPOlBG2muIYdzWbgWyYOBx4rPXifPzF8ytc=
    on:
      tags: true
      all_branches: true
      repo: vinceallenvince/drawing-utils-lib
